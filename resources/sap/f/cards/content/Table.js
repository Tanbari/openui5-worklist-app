/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Table","sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/f/cards/Data"],function(t,e,n,i){"use strict";var a=e.extend("sap.f.cards.content.Table",{metadata:{properties:{data:{type:"object"},columns:{type:"array"},row:{type:"array"}},aggregations:{_content:{multiple:false,visibility:"hidden"}}},renderer:function(t,e){t.write("<div");t.writeElementData(e);t.write(">");t.renderControl(e.getAggregation("_content"));t.write("</div>")}});a.prototype.applySettings=function(t,n){var i=t.data;if(i){this.setData(i);delete t.data}e.prototype.applySettings.apply(this,[t,n]);t.data=i;return this};a.prototype.init=function(){this.oTable=new t({id:this.getId()+"-Table"});this.setAggregation("_content",this.oTable);var e=new n;this.setModel(e)};a.prototype.onBeforeRendering=function(){var t=[];this.getColumns().forEach(function(e){this.getAggregation("_content").addColumn(new sap.m.Column({header:new sap.m.Text({text:e.label})}));t.push(new sap.m.Text({text:e.value}))}.bind(this));this.getAggregation("_content").bindItems({path:this.getAggregation("_content").getBindingContext().getPath(),template:new sap.m.ColumnListItem({cells:t})})};a.prototype.exit=function(){if(this.oTable){this.oTable.destroy();this.oTable=null}};a.prototype.destroy=function(){this.setAggregation("_content",null);this.setModel(null);return e.prototype.destroy.apply(this,arguments)};a.prototype.setData=function(t){this.setProperty("data",t,true);if(!t){return this}this.getAggregation("_content").bindElement({path:t.path||"/"});var e=t.request;if(t.json&&!e){this.getModel().setData(t.json)}if(e){i.fetch(e).then(function(t){this.getModel().setData(t)}.bind(this)).catch(function(t){})}return this};return a});