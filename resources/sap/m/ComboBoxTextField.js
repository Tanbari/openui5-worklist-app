/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./InputBase","./library","sap/ui/core/InvisibleText","sap/ui/core/library","sap/ui/Device","sap/ui/core/LabelEnablement","./ComboBoxTextFieldRenderer"],function(e,t,o,i,r,n,a){"use strict";var s=e.extend("sap.m.ComboBoxTextField",{metadata:{library:"sap.m",properties:{maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},showButton:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{_buttonLabelText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}}});s.prototype.init=function(){e.prototype.init.apply(this,arguments);var t=sap.ui.getCore().getLibraryResourceBundle("sap.m");var o=this.addEndIcon({id:this.getId()+"-arrow",src:"sap-icon://slim-arrow-down",noTabStop:true,alt:t.getText("COMBOBOX_BUTTON"),decorative:false});o.addAriaLabelledBy("")};s.prototype.getIcon=function(){return this.getAggregation("_endIcon")[0]};s.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);var t=n.getReferencingLabels(this)||[];t.forEach(function(e){if(this.getIcon().getAriaLabelledBy().indexOf(e)===-1){this.getIcon().addAssociation("ariaLabelledBy",e,true)}},this)};s.prototype.setShowButton=function(e){this.getIcon().setVisible(e);return this.setProperty("showButton",e,true)};s.prototype.getOpenArea=function(){return this.getIcon().getDomRef()};s.prototype.onsapenter=function(t){e.prototype.onsapenter.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}t.setMarked();var o=this.getValue(),i=o.length;this.setValue(o);this.selectText(i,i)};s.prototype.getValue=function(){var e=this.getFocusDomRef();if(e){return e.value}return this.getProperty("value")};s.prototype.getDomRefForValueStateMessage=function(){return this.getDomRef()};s.prototype.getAccessibilityInfo=function(){var t=e.prototype.getAccessibilityInfo.apply(this,arguments);t.type=sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_COMBO");return t};return s});