/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/Log","sap/base/util/ObjectPath"],function(e,t,i,n){"use strict";var s=e.extend("sap.ui.core.routing.HashChanger",{constructor:function(){e.apply(this)}});s.prototype.init=function(){if(this._initialized){i.info("this HashChanger instance has already been initialized.");return false}this._initialized=true;t.changed.add(this.fireHashChanged,this);if(!t.isActive()){t.initialized.addOnce(this.fireHashChanged,this);t.init()}else{this.fireHashChanged(t.getHash())}return this._initialized};s.prototype.fireHashChanged=function(e,t){this.fireEvent("hashChanged",{newHash:e,oldHash:t})};s.prototype.setHash=function(e){this.fireEvent("hashSet",{sHash:e});t.setHash(e)};s.prototype.replaceHash=function(e){this.fireEvent("hashReplaced",{sHash:e});t.replaceHash(e)};s.prototype.getHash=function(){return t.getHash()};s.prototype.getEventNamesForHistory=function(){return["hashChanged"]};s.prototype.destroy=function(){delete this._initialized;t.changed.remove(this.fireHashChanged,this);e.prototype.destroy.apply(this,arguments)};(function(){var e=null;s.getInstance=function(){if(!e){e=new s}return e};function t(t){var i,n,s;for(i in e.mEventRegistry){if(e.mEventRegistry.hasOwnProperty(i)){n=e.mEventRegistry[i];s=t.mEventRegistry[i];if(s){t.mEventRegistry[i]=n.concat(s)}else{t.mEventRegistry[i]=n}}}}s.replaceHashChanger=function(i){if(e&&i){var s=n.get("sap.ui.core.routing.History.getInstance"),a;if(s){a=s();a._unRegisterHashChanger()}t(i);e.destroy();if(a){a._setHashChanger(i)}}e=i}})();return s});