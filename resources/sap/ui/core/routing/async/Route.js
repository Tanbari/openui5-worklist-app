/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e,i){"use strict";return{_routeMatched:function(o,r,n){var a=this._oRouter,s,h,u,f=null,_=null,c,g,d,l=this;if(!r||r===true){c=true;r=Promise.resolve()}if(this._oParent){r=this._oParent._routeMatched(o,r)}else if(this._oNestingParent){this._oNestingParent._routeMatched(o,r,this)}h=i.extend({},a._oConfig,this._oConfig);g=i.extend({},o);g.routeConfig=h;u={name:h.name,arguments:o,config:h};if(n){u.nestedRoute=n}this.fireBeforeMatched(u);a.fireBeforeRouteMatched(u);if(this._oTarget){s=this._oTarget;s._updateOptions(this._convertToTargetOptions(h));r=s._place(r);if(this._oRouter._oTargetHandler&&this._oRouter._oTargetHandler._chainNavigation){d=r;r=this._oRouter._oTargetHandler._chainNavigation(function(){return d})}}else if(t.browser.msie||t.browser.edge){d=r;r=new Promise(function(t,e){setTimeout(function(){var i=a._oTargets._display(l._oConfig.target,g,l._oConfig.titleTarget,d);i.then(t,e)},0)})}else{r=a._oTargets._display(this._oConfig.target,g,this._oConfig.titleTarget,r)}return r.then(function(t){t=t||{};f=t.view;_=t.control;u.view=f;u.targetControl=_;if(h.callback){h.callback(this,o,h,_,f)}this.fireEvent("matched",u);a.fireRouteMatched(u);if(c){e.info("The route named '"+h.name+"' did match with its pattern",this);this.fireEvent("patternMatched",u);a.fireRoutePatternMatched(u)}return t}.bind(this))}}});