/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/ElementMetadata","sap/ui/core/XMLTemplateProcessor","sap/base/Log"],function(t,e,a){"use strict";var r={};var n=function(e,r){this.InvalidationMode={Render:true,None:false};if(!r.hasOwnProperty("renderer")){r.renderer="sap.ui.core.XMLCompositeRenderer"}if(!r.hasOwnProperty("alias")){r.alias="this"}t.apply(this,arguments);var n=this._bAbstract;if(!n){if(!r.fragment&&e!=="sap.ui.core.XMLComposite"){r.fragment=e;r.fragmentUnspecified=true}if(!this._fragment&&r.fragment){try{if(!this._fragment){if(r.fragmentContent){if(typeof r.fragmentContent==="string"){var i=new DOMParser;r.fragmentContent=i.parseFromString(r.fragmentContent,"text/xml").documentElement}this._fragment=r.fragmentContent}else{this._fragment=this._loadFragment(r.fragment,"control")}}}catch(t){if(!r.fragmentUnspecified){throw t}else{a.warning("Implicitly inferred fragment xml "+r.fragment+" not found. "+e+" is not abstract!")}}}}this._sCompositeAggregation=r.metadata?r.metadata.compositeAggregation||null:null;this._createPrivateAggregationAccessors();this._applyAggregationSettings()};n.prototype=Object.create(t.prototype);n.uid=t.uid;n.extend=function(t){for(var e in t){n[e]=t[e]}return n};n.prototype.getCompositeAggregationName=function(){return this._sCompositeAggregation||"_content"};n.prototype.getFragment=function(){if(this._fragment){return this._fragment.cloneNode(true)}};n.prototype._applyAggregationSettings=function(){var t=this.getAllAggregations();for(var e in t){if(t[e].type==="TemplateMetadataContext"){this.getAggregation(e)._doesNotRequireFactory=true}}};n.prototype._createPrivateAggregationAccessors=function(){var t=this.getAllPrivateAggregations(),e=this.getClass().prototype,a=function(t,a){if(!e[t]){e[t]=a}};for(var r in t){t[r].generate(a)}};n.prototype._suppressInvalidate=function(t,e){if(e){return true}if(!t.appData){t.appData={};t.appData.invalidate=this.InvalidationMode.None}if(t&&t.appData&&t.appData.invalidate===this.InvalidationMode.Render){return false}return true};n.prototype.getMandatoryAggregations=function(){if(!this._mMandatoryAggregations){var t=this.getAllAggregations(),e={};for(var a in t){if(t[a].type==="TemplateMetadataContext"&&t[a].appData.mandatory){e[a]=t[a]}}this._mMandatoryAggregations=e}return this._mMandatoryAggregations};n.prototype._loadFragment=function(t,a){var n=a+"$"+t;if(!r[n]){r[n]=e.loadTemplate(t,a)}return r[n]};return n},true);